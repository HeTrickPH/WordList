<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<title>20 word test</title>

<script>
	function Words(spell, def, used) {
		this.spell = spell;
		this.def = def;
		this.used = used;
	}
	
	var WordList = [new Words("assure", "tell someone something positively or confidently to dispel any doubts they may have", false),
				    new Words("impeccable", "without fault or error", false),
		   		    new Words("stubborn", "tenaciously unwilling or marked by tenacious unwillingness to yield", false),
				    new Words("forbid", "command against", false),
				    new Words("chasm", "a deep opening in the earth's surface", false),
				    new Words("advisable", "worthy of being recommended or suggested", false),
				    new Words("perform", "get done ; carry out", false),
				    new Words("intention", "an anticipated outcome that is intended or that guides your planned actions", false),
				    new Words("glisten", "be shiny, as if wet", false),
				    new Words("repose", "freedom from worry", false),
				    new Words("mynopic", "unable to see distant object clearly", false),
				    new Words("tether", "keep things tied together", false),
				    new Words("reel", "a cylinder that can be wound with flexible material like film or fishing line", false),
				    new Words("brash", "offensively bold", false),
				    new Words("hedge", "living fence made of closely planted bushes", false),
				    new Words("sufficient", "of a quantity that can fulfill a need or requirement but without being abundant", false),
				    new Words("fragile", "easily broken or damaged or destroyed", false),
				    new Words("fray", "wear away by rubbing", false),
				    new Words("tweet", "a weak chirping sound as of a small bird", false),
				    new Words("stride", "walk with long step", false)];
	
	var testWordList = [];
	var timer;
	function showWord() {
		var manyWord = document.getElementById("manyWord");
		var defList = "";
		var numWordIsSoImportant = 1; 
		var i = Math.floor(Math.random() * WordList.length)
		while (i < WordList.length && numWordIsSoImportant <= manyWord.value ) {
			if (WordList[i].used != true) { 
				defList +="<tr><td>" + WordList[i].def + "</td><td><div><input class='form-control' type='text' id='" + WordList[i].spell + "'/><span></span><div></td></tr>";
				document.getElementById("defList").innerHTML = defList;
				
				WordList[i].used = true;
				testWordList.push(i);
				numWordIsSoImportant++;
				i = Math.floor(Math.random() * WordList.length);
			} else {
				i = Math.floor(Math.random() * WordList.length);
			}
		}
		document.getElementById("addbnt").innerHTML = "<button type='button' class='btn btn-primary btn-md btn-block' onclick='showWord()' disabled>start</button>";
		document.getElementById("reOrcheck").innerHTML = "<button type='button'class='btn btn-primary' data-toggle='modal' data-target='#myModal' onclick='Empty()'>cheack the answer</button>"
		debugger;
		var TimeLim = document.getElementById("Timelim");
		var d = new Date();
		var countDown;
		if (TimeLim.value == "off"){
			var timer = setTimeout(check, 60 * 60 * 1000);
			countDown = d.setMinutes(d.setMinutes() + 60).getTime();
		} else {
			var timer = setTimeout(check, TimeLim.value * 60 * 1000);
			countDown = d.setMinutes(d.setMinutes() + TimeLim.value).getTime();
		}
		var x = setInterval(function(){
			var now = new Date().getTime();
			var distance = countDown - now;
			
			var minutes = Math.floorMath.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
			var seconds = Math.floor((distance % (1000 * 60)) / 1000);
			document.getElementById("reQeast").innerHTML = minutes + "m" + seconds + "s";
		})
	}
	
	function Empty() {
		var emptyInput = 0;
			for (var i = 0;i < testWordList.length; i++) {
				var santans = WordList[testWordList[i]]
				var input = document.getElementById(santans.spell);
				if (input.value == "") {
					emptyInput++;
				}
			}
		if (emptyInput > 0) {
		document.getElementById("modalBody").innerHTML = "Do you want check your answer?" + emptyInput + "Q is empty";
		}
	}
	
	function check(timeover) {
		clearTimeout(timer);
		var defList = "";
		var score = 100;
		for (var i = 0;i < testWordList.length; i++) {
			var santans = WordList[testWordList[i]]
			var input = document.getElementById(santans.spell);
			if (santans.spell === input.value) {
					defList +="<tr><td>" + santans.def + "</td><td><div class='form-group has-success has-feedback'><input class='form-control' type='text' value='" + input.value + "' id='" + santans.spell + "' disabled/><span class='glyphicon glyphicon-ok form-control-feedback'></span></div></td></tr>";
				score = score;
			} 
			else {
				defList +="<tr><td>" + santans.def  + "      " + "<strong>/" + santans.spell + "</strong>" + "</td><td><div class='form-group has-error has-feedback'><input class='form-control' type='text' value='" + input.value + "' id='" + santans.spell + "'disabled/><span class='glyphic on glyphicon-remove form-control-feedback'></span></div></td></tr>";
				score = score - (100 / testWordList.length);
			}
		}
		var message = "Do you still want to know your score?"; // default message 
		if (score == 100) { message = "Do what ever you want tonight!"}
		else if (score >= 90) { message = "Ooooh, almost got 100!!";}
		else if (score >= 70) { message = "Try to got 100!!";}
		else if (score >= 50) { message = "Don't try to play game tonight.";}
		else if (score >= 30) { message = "Seriously? No food for you!";} 
		else if (score > 0) { message = "You're screwed!!!!";}		

		document.getElementById("massage").innerHTML = message;
		document.getElementById("score").innerHTML = score;
		overlayOn();
		document.getElementById("defList").innerHTML = defList;
		document.getElementById("reOrcheck").innerHTML = "<button class='btn btn-primary' id='reOrcheck' onclick='reStart()'>REtest?</button>";	
	}
	
	function reStart() {
		location.reload();
	}
	
	function overlayOn() {
		document.getElementById("overlay").style.display = "block";
	}

	function overlayOff() {
		document.getElementById("overlay").style.display = "none";
	}	
</script>

<style>
	#overlay {
		position: fixed;
		display: none;
		width: 100%;
		height: 100%;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background-color: rgba(0,0,0,0.5);
		z-index: 2;
		cursor: pointer;
	}
	#box {
		background-color: white;
		width: 450px;
		height: 425px;
		position: absolute;
		top: 50%;
		left: 50%;
		color: white;
		transform: translate(-50%,-50%);
		-ms-transform: translate(-50%,-50%);
		border: 2px solid black;
		border-radius: 10px;
	}
	#score {
		margin-top: 75px;
		margin-left: 100px;
		text-align: center;
		width: 250px;
		height: 200px;
		font-size: 100px;
		color: black;
	}
	#massage {
		font-size: 24px;
		color: black;
	}	
	#button {
		margin-right: 3%;
		margin-top: 15%;
		float: right;
	}
</style>

</head>

<body>
	<!--navigation var-->
	<nav class="navbar navbar-inverse">
		<div class="container-fluid">
			<div class="collapse navbar-collapse" id="myNavbar">
				<ul class="nav navbar-nav">
					<li><a href="20savefile.html">List</a></li>
					<li class="active"><a href="20 coqy.html">Quiz</a></li>
				</ul>
			</div>
		</div>
	</nav>
	
	<!-- -->
	<h1>Quiz</h1>
	<legend>
		<h4>Type answer in blank</h4>
	</legend>
	<div class="form-inline" id="reQeast">
		<div class="form-group col-sm-1">
			<label for="inlineFormCustomSelect">Time</label>
		</div>
		<div class="form-group col-sm-2">
			<select class="form-control form-control-sm" id="Timelim">
				<option>off</option>
				<option>1</option>
				<option>3</option>
				<option>5</option>
			</select>
		</div>
		<div class="form-group col-sm-1">
			<label for="inlineFormCustomSelect">Numder of word</label>
		</div>
		<div class="form-group col-sm-2">
			<select class="form-control form-control-sm" id="manyWord">
				<option>5</option>
				<option>10</option>
				<option>15</option>
				<option>20</option>
			</select>
		</div>
		<div class="form-group col-sm-1">
			<label for="inlineFormCustomSelect">Chose the date</label>
		</div>
		<div class="form-group col-sm-2">
			<select class="form-control form-control-sm">
				<option>08/24/2017</option>
				<option></option>
				<option></option>
				<option></option>
			</select>
		</div>
		<div class="form-group col-sm-1">
			<label for="inlineFormCustomSelect">Preference</label>
		</div>
		<div class="form-group col-sm-2">
			<select class="form-control form-control-sm">
				<option></option>
				<option></option>
				<option></option>
				<option></option>
			</select>
		</div>
	</div>
	<div class="col-sm-12" id="addbnt">
		<button type="button" class="btn btn-primary btn-md btn-block" onclick="showWord()">start</button>
	</div>
	<!--table-->
	<div class="container-fluid">
		<table class="table table-bordered">
			<thead>
				<tr style="background-color: #6666ff">
					<th class="col-sm-9">DEF</th>
					<th class="col-sm-3">WORD</th>
				</tr>
			</thead>
			<tbody id="defList">
				
			</tbody>
		</table>
	</div>
	<div class="col-sm-1">
		<div id="reOrcheck"></div>
	</div>
	
	<div id="overlay">
		<div id="box">
			<div id="score"></div>
			<div id="massage"></div>
			<button class="btn btn-primary" id="button" onClick="overlayOff()">Go back</button>
		</div>
	</div>
	
	
	<div class="modal fade" id="myModal" role="dialog">
		<div class="modal-dialog">

			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Do you want check your work?</h4>
				</div>
				<div class="modal-body">
					<p id="modalBody"></p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal" onClick="check()">Yes, I want.</button>
					<button type="button" class="btn btn-primary" data-dismiss="modal">No, not now.</button>
				</div>
			</div>

		</div>
    </div>
  
</body>
</html>
